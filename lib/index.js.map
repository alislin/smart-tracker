{"version":3,"file":"index.js","sources":["../src/base64.js","../src/utils.js","../src/browerInfo.js","../src/tracker.js","../src/index.js"],"sourcesContent":["/*! https://mths.be/base64 v<%= version %> by @mathias | MIT license */\r\n;(function(root) {\r\n\r\n\t// Detect free variables `exports`.\r\n\tvar freeExports = typeof exports == 'object' && exports;\r\n\r\n\t// Detect free variable `module`.\r\n\tvar freeModule = typeof module == 'object' && module &&\r\n\t\tmodule.exports == freeExports && module;\r\n\r\n\t// Detect free variable `global`, from Node.js or Browserified code, and use\r\n\t// it as `root`.\r\n\tvar freeGlobal = typeof global == 'object' && global;\r\n\tif (freeGlobal.global === freeGlobal || freeGlobal.window === freeGlobal) {\r\n\t\troot = freeGlobal;\r\n\t}\r\n\r\n\t/*--------------------------------------------------------------------------*/\r\n\r\n\tvar InvalidCharacterError = function(message) {\r\n\t\tthis.message = message;\r\n\t};\r\n\tInvalidCharacterError.prototype = new Error;\r\n\tInvalidCharacterError.prototype.name = 'InvalidCharacterError';\r\n\r\n\tvar error = function(message) {\r\n\t\t// Note: the error messages used throughout this file match those used by\r\n\t\t// the native `atob`/`btoa` implementation in Chromium.\r\n\t\tthrow new InvalidCharacterError(message);\r\n\t};\r\n\r\n\tvar TABLE = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\r\n\t// http://whatwg.org/html/common-microsyntaxes.html#space-character\r\n\tvar REGEX_SPACE_CHARACTERS = /<%= spaceCharacters %>/g;\r\n\r\n\t// `decode` is designed to be fully compatible with `atob` as described in the\r\n\t// HTML Standard. http://whatwg.org/html/webappapis.html#dom-windowbase64-atob\r\n\t// The optimized base64-decoding algorithm used is based on @atk’s excellent\r\n\t// implementation. https://gist.github.com/atk/1020396\r\n\tvar decode = function(input) {\r\n\t\tinput = String(input)\r\n\t\t\t.replace(REGEX_SPACE_CHARACTERS, '');\r\n\t\tvar length = input.length;\r\n\t\tif (length % 4 == 0) {\r\n\t\t\tinput = input.replace(/==?$/, '');\r\n\t\t\tlength = input.length;\r\n\t\t}\r\n\t\tif (\r\n\t\t\tlength % 4 == 1 ||\r\n\t\t\t// http://whatwg.org/C#alphanumeric-ascii-characters\r\n\t\t\t/[^+a-zA-Z0-9/]/.test(input)\r\n\t\t) {\r\n\t\t\terror(\r\n\t\t\t\t'Invalid character: the string to be decoded is not correctly encoded.'\r\n\t\t\t);\r\n\t\t}\r\n\t\tvar bitCounter = 0;\r\n\t\tvar bitStorage;\r\n\t\tvar buffer;\r\n\t\tvar output = '';\r\n\t\tvar position = -1;\r\n\t\twhile (++position < length) {\r\n\t\t\tbuffer = TABLE.indexOf(input.charAt(position));\r\n\t\t\tbitStorage = bitCounter % 4 ? bitStorage * 64 + buffer : buffer;\r\n\t\t\t// Unless this is the first of a group of 4 characters…\r\n\t\t\tif (bitCounter++ % 4) {\r\n\t\t\t\t// …convert the first 8 bits to a single ASCII character.\r\n\t\t\t\toutput += String.fromCharCode(\r\n\t\t\t\t\t0xFF & bitStorage >> (-2 * bitCounter & 6)\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn output;\r\n\t};\r\n\r\n\t// `encode` is designed to be fully compatible with `btoa` as described in the\r\n\t// HTML Standard: http://whatwg.org/html/webappapis.html#dom-windowbase64-btoa\r\n\tvar encode = function(input) {\r\n\t\tinput = String(input);\r\n\t\tif (/[^\\0-\\xFF]/.test(input)) {\r\n\t\t\t// Note: no need to special-case astral symbols here, as surrogates are\r\n\t\t\t// matched, and the input is supposed to only contain ASCII anyway.\r\n\t\t\terror(\r\n\t\t\t\t'The string to be encoded contains characters outside of the ' +\r\n\t\t\t\t'Latin1 range.'\r\n\t\t\t);\r\n\t\t}\r\n\t\tvar padding = input.length % 3;\r\n\t\tvar output = '';\r\n\t\tvar position = -1;\r\n\t\tvar a;\r\n\t\tvar b;\r\n\t\tvar c;\r\n\t\tvar buffer;\r\n\t\t// Make sure any padding is handled outside of the loop.\r\n\t\tvar length = input.length - padding;\r\n\r\n\t\twhile (++position < length) {\r\n\t\t\t// Read three bytes, i.e. 24 bits.\r\n\t\t\ta = input.charCodeAt(position) << 16;\r\n\t\t\tb = input.charCodeAt(++position) << 8;\r\n\t\t\tc = input.charCodeAt(++position);\r\n\t\t\tbuffer = a + b + c;\r\n\t\t\t// Turn the 24 bits into four chunks of 6 bits each, and append the\r\n\t\t\t// matching character for each of them to the output.\r\n\t\t\toutput += (\r\n\t\t\t\tTABLE.charAt(buffer >> 18 & 0x3F) +\r\n\t\t\t\tTABLE.charAt(buffer >> 12 & 0x3F) +\r\n\t\t\t\tTABLE.charAt(buffer >> 6 & 0x3F) +\r\n\t\t\t\tTABLE.charAt(buffer & 0x3F)\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tif (padding == 2) {\r\n\t\t\ta = input.charCodeAt(position) << 8;\r\n\t\t\tb = input.charCodeAt(++position);\r\n\t\t\tbuffer = a + b;\r\n\t\t\toutput += (\r\n\t\t\t\tTABLE.charAt(buffer >> 10) +\r\n\t\t\t\tTABLE.charAt((buffer >> 4) & 0x3F) +\r\n\t\t\t\tTABLE.charAt((buffer << 2) & 0x3F) +\r\n\t\t\t\t'='\r\n\t\t\t);\r\n\t\t} else if (padding == 1) {\r\n\t\t\tbuffer = input.charCodeAt(position);\r\n\t\t\toutput += (\r\n\t\t\t\tTABLE.charAt(buffer >> 2) +\r\n\t\t\t\tTABLE.charAt((buffer << 4) & 0x3F) +\r\n\t\t\t\t'=='\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\treturn output;\r\n\t};\r\n\r\n\tvar base64 = {\r\n\t\t'encode': encode,\r\n\t\t'decode': decode,\r\n\t\t'version': '<%= version %>'\r\n\t};\r\n\r\n\t// Some AMD build optimizers, like r.js, check for specific condition patterns\r\n\t// like the following:\r\n\tif (\r\n\t\ttypeof define == 'function' &&\r\n\t\ttypeof define.amd == 'object' &&\r\n\t\tdefine.amd\r\n\t) {\r\n\t\tdefine(function() {\r\n\t\t\treturn base64;\r\n\t\t});\r\n\t}\telse if (freeExports && !freeExports.nodeType) {\r\n\t\tif (freeModule) { // in Node.js or RingoJS v0.8.0+\r\n\t\t\tfreeModule.exports = base64;\r\n\t\t} else { // in Narwhal or RingoJS v0.7.0-\r\n\t\t\tfor (var key in base64) {\r\n\t\t\t\tbase64.hasOwnProperty(key) && (freeExports[key] = base64[key]);\r\n\t\t\t}\r\n\t\t}\r\n\t} else { // in Rhino or a web browser\r\n\t\troot.base64 = base64;\r\n\t}\r\n\r\n}(this));\r\n","import extend from 'extend';\r\n\r\nexport const getEvent = (event) => {\r\n    event = event || window.event;\r\n    if (!event) {\r\n        return event;\r\n    }\r\n    if (!event.target) {\r\n        event.target = event.srcElement;\r\n    }\r\n    if (!event.currentTarget) {\r\n        event.currentTarget = event.srcElement;\r\n    }\r\n    return event;\r\n}\r\n\r\nexport const getEventListenerMethod = () => {\r\n    let addMethod = 'addEventListener', removeMethod = 'removeEventListener', prefix = '';\r\n    if (!window.addEventListener) {\r\n        addMethod = 'attachEvent';\r\n        removeMethod = 'detachEvent';\r\n        prefix = 'on';\r\n    }\r\n    return {\r\n        addMethod,\r\n        removeMethod,\r\n        prefix,\r\n    }\r\n}\r\n\r\nexport const getBoundingClientRect = (element) => {\r\n    const rect = element.getBoundingClientRect();\r\n    const width = rect.width || rect.right - rect.left;\r\n    const heigth = rect.heigth || rect.bottom - rect.top;\r\n    return extend({}, rect, {\r\n        width,\r\n        heigth,\r\n    });\r\n}\r\n\r\nexport const stringify = (obj) => {\r\n    let params = [];\r\n    for (let key in obj) {\r\n        params.push(`${key}=${obj[key]}`);\r\n    }\r\n    return params.join('&');\r\n}\r\n\r\nexport function getDomPath(element, useClass = false) {\r\n    if (!(element instanceof HTMLElement)) {\r\n        console.warn('input is not a HTML element!');\r\n        return '';\r\n    }\r\n    let domPath = [];\r\n    let elem = element;\r\n    while (elem) {\r\n        let domDesc = getDomDesc(elem, useClass);\r\n        if (!domDesc) {\r\n            break;\r\n        }\r\n        domPath.unshift(domDesc);\r\n        if (querySelector(domPath.join('>')) === element || domDesc.indexOf('body') >= 0) {\r\n            break;\r\n        }\r\n        domPath.shift();\r\n        const children = elem.parentNode.children;\r\n        if (children.length > 1) {\r\n            for (let i = 0; i < children.length; i++) {\r\n                if (children[i] === elem) {\r\n                    domDesc += `:nth-child(${i + 1})`;\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        domPath.unshift(domDesc);\r\n        if (querySelector(domPath.join('>')) === element) {\r\n            break;\r\n        }\r\n        elem = elem.parentNode;\r\n    }\r\n    return domPath.join('>');\r\n}\r\n\r\nexport function getDomDesc(element, useClass = false) {\r\n    const domDesc = [];\r\n    if (!element || !element.tagName) {\r\n        return '';\r\n    }\r\n    if (element.id) {\r\n        return `#${element.id}`;\r\n    }\r\n    domDesc.push(element.tagName.toLowerCase());\r\n    if (useClass) {\r\n        const className = element.className;\r\n        if (className && typeof className === 'string') {\r\n            const classes = className.split(/\\s+/);\r\n            domDesc.push(`.${classes.join('.')}`);\r\n        }\r\n    }\r\n    if (element.name) {\r\n        domDesc.push(`[name=${element.name}]`);\r\n    }\r\n    return domDesc.join('');\r\n}\r\n\r\nexport function querySelector(queryString) {\r\n    return document.getElementById(queryString) || document.getElementsByName(queryString)[0] || document.querySelector(queryString);\r\n}\r\n","    //浏览器信息\r\n    export function browserInfo() {\r\n        let u = navigator.userAgent;\r\n        let self = {};\r\n        let match = {\r\n            //内核\r\n            'Trident': u.indexOf('Trident') > 0 || u.indexOf('NET CLR') > 0,\r\n            'Presto': u.indexOf('Presto') > 0,\r\n            'WebKit': u.indexOf('AppleWebKit') > 0,\r\n            'Gecko': u.indexOf('Gecko/') > 0,\r\n            //浏览器\r\n            'Safari': u.indexOf('Safari') > 0,\r\n            'Chrome': u.indexOf('Chrome') > 0 || u.indexOf('CriOS') > 0,\r\n            'IE': u.indexOf('MSIE') > 0 || u.indexOf('Trident') > 0,\r\n            'Edge': u.indexOf('Edge') > 0,\r\n            'Firefox': u.indexOf('Firefox') > 0,\r\n            'Opera': u.indexOf('Opera') > 0 || u.indexOf('OPR') > 0,\r\n            'Vivaldi': u.indexOf('Vivaldi') > 0,\r\n            'UC': u.indexOf('UC') > 0 || u.indexOf(' UBrowser') > 0,\r\n            'QQBrowser': u.indexOf('QQBrowser') > 0,\r\n            'QQ': u.indexOf('QQ/') > 0,\r\n            'Baidu': u.indexOf('Baidu') > 0 || u.indexOf('BIDUBrowser') > 0,\r\n            'Maxthon': u.indexOf('Maxthon') > 0,\r\n            'LBBROWSER': u.indexOf('LBBROWSER') > 0,\r\n            '2345Explorer': u.indexOf('2345Explorer') > 0,\r\n            'Sogou': u.indexOf('MetaSr') > 0 || u.indexOf('Sogou') > 0,\r\n            'Wechat': u.indexOf('MicroMessenger') > 0,\r\n            'Taobao': u.indexOf('AliApp(TB') > 0,\r\n            'Alipay': u.indexOf('AliApp(AP') > 0,\r\n            'Weibo': u.indexOf('Weibo') > 0,\r\n            'Suning': u.indexOf('SNEBUY-APP') > 0,\r\n            'iQiYi': u.indexOf('IqiyiApp') > 0,\r\n            //操作系统平台\r\n            'Windows': u.indexOf('Windows') > 0,\r\n            'Linux': u.indexOf('Linux') > 0,\r\n            'Mac': u.indexOf('Macintosh') > 0,\r\n            'Android': u.indexOf('Android') > 0 || u.indexOf('Adr') > 0,\r\n            'WP': u.indexOf('IEMobile') > 0,\r\n            'BlackBerry': u.indexOf('BlackBerry') > 0 || u.indexOf('RIM') > 0 || u.indexOf('BB') > 0,\r\n            'MeeGo': u.indexOf('MeeGo') > 0,\r\n            'Symbian': u.indexOf('Symbian') > 0,\r\n            'iOS': u.indexOf('like Mac OS X') > 0,\r\n            //移动设备\r\n            'Mobile': u.indexOf('Mobi') > 0 || u.indexOf('iPh') > 0 || u.indexOf('480') > 0,\r\n            'Tablet': u.indexOf('Tablet') > 0 || u.indexOf('iPad') > 0 || u.indexOf('Nexus 7') > 0\r\n        };\r\n        if (match.Mobile) {\r\n            match.Mobile = !(u.indexOf('iPad') > 0);\r\n        }\r\n        //基本信息\r\n        let hash = {\r\n            engine: ['WebKit', 'Trident', 'Gecko', 'Presto'],\r\n            browser: ['Safari', 'Chrome', 'IE', 'Edge', 'Firefox', 'Opera', 'Vivaldi', 'UC', 'QQBrowser', 'QQ', 'Baidu', 'Maxthon', 'Sogou', 'LBBROWSER', '2345Explorer', 'Wechat', 'Taobao', 'Alipay', 'Weibo', 'Suning', 'iQiYi'],\r\n            os: ['Windows', 'Linux', 'Mac', 'Android', 'iOS', 'WP', 'BlackBerry', 'MeeGo', 'Symbian'],\r\n            device: ['Mobile', 'Tablet']\r\n        };\r\n        self.device = 'PC';\r\n        self.language = (function () {\r\n            let g = (navigator.browserLanguage || navigator.language);\r\n            let arr = g.split('-');\r\n            if (arr[1]) {\r\n                arr[1] = arr[1].toUpperCase();\r\n            }\r\n            return arr.join('-');\r\n        })();\r\n        for (let s in hash) {\r\n            for (let i = 0; i < hash[s].length; i++) {\r\n                let value = hash[s][i];\r\n                if (match[value]) {\r\n                    self[s] = value;\r\n                }\r\n            }\r\n        }\r\n        //系统版本信息\r\n        let osVersion = {\r\n            'Windows': function () {\r\n                let v = u.replace(/^.*Windows NT ([\\d.]+);.*$/, '$1');\r\n                let hash = {\r\n                    '6.4': '10',\r\n                    '6.3': '8.1',\r\n                    '6.2': '8',\r\n                    '6.1': '7',\r\n                    '6.0': 'Vista',\r\n                    '5.2': 'XP',\r\n                    '5.1': 'XP',\r\n                    '5.0': '2000'\r\n                };\r\n                return hash[v] || v;\r\n            },\r\n            'Android': function () {\r\n                return u.replace(/^.*Android ([\\d.]+);.*$/, '$1');\r\n            },\r\n            'iOS': function () {\r\n                return u.replace(/^.*OS ([\\d_]+) like.*$/, '$1').replace(/_/g, '.');\r\n            },\r\n            'Mac': function () {\r\n                return u.replace(/^.*Mac OS X ([\\d_]+).*$/, '$1').replace(/_/g, '.');\r\n            }\r\n        }\r\n        self.osVersion = '';\r\n        if (osVersion[self.os]) {\r\n            self.osVersion = osVersion[self.os]();\r\n        }\r\n        //浏览器版本信息\r\n        let version = {\r\n            'Chrome': function () {\r\n                return u.replace(/^.*Chrome\\/([\\d.]+).*$/, '$1');\r\n            },\r\n            'IE': function () {\r\n                let v = u.replace(/^.*MSIE ([\\d.]+).*$/, '$1');\r\n                if (v == u) {\r\n                    v = u.replace(/^.*rv:([\\d.]+).*$/, '$1');\r\n                }\r\n                return v != u ? v : '';\r\n            },\r\n            'Edge': function () {\r\n                return u.replace(/^.*Edge\\/([\\d.]+).*$/, '$1');\r\n            },\r\n            'Firefox': function () {\r\n                return u.replace(/^.*Firefox\\/([\\d.]+).*$/, '$1');\r\n            },\r\n            'Safari': function () {\r\n                return u.replace(/^.*Version\\/([\\d.]+).*$/, '$1');\r\n            },\r\n            'Opera': function () {\r\n                return u.replace(/^.*Opera\\/([\\d.]+).*$/, '$1');\r\n            },\r\n            'Vivaldi': function () {\r\n                return u.replace(/^.*Vivaldi\\/([\\d.]+).*$/, '$1');\r\n            },\r\n            'Maxthon': function () {\r\n                return u.replace(/^.*Maxthon\\/([\\d.]+).*$/, '$1');\r\n            },\r\n            'QQBrowser': function () {\r\n                return u.replace(/^.*QQBrowser\\/([\\d.]+).*$/, '$1');\r\n            },\r\n            'QQ': function () {\r\n                return u.replace(/^.*QQ\\/([\\d.]+).*$/, '$1');\r\n            },\r\n            'Baidu': function () {\r\n                return u.replace(/^.*BIDUBrowser[\\s\\/]([\\d.]+).*$/, '$1');\r\n            },\r\n            'UC': function () {\r\n                return u.replace(/^.*UC?Browser\\/([\\d.]+).*$/, '$1');\r\n            },\r\n            '2345Explorer': function () {\r\n                return u.replace(/^.*2345Explorer\\/([\\d.]+).*$/, '$1');\r\n            },\r\n            'Wechat': function () {\r\n                return u.replace(/^.*MicroMessenger\\/([\\d.]+).*$/, '$1');\r\n            },\r\n            'Taobao': function () {\r\n                return u.replace(/^.*AliApp\\(TB\\/([\\d.]+).*$/, '$1');\r\n            },\r\n            'Alipay': function () {\r\n                return u.replace(/^.*AliApp\\(AP\\/([\\d.]+).*$/, '$1');\r\n            },\r\n            'Weibo': function () {\r\n                return u.replace(/^.*weibo__([\\d.]+).*$/, '$1');\r\n            },\r\n            'Suning': function () {\r\n                return u.replace(/^.*SNEBUY-APP([\\d.]+).*$/, '$1');\r\n            },\r\n            'iQiYi': function () {\r\n                return u.replace(/^.*IqiyiVersion\\/([\\d.]+).*$/, '$1');\r\n            }\r\n        };\r\n        self.version = '';\r\n        if (version[self.browser]) {\r\n            self.version = version[self.browser]();\r\n        }\r\n        return self\r\n    }\r\n","import extend from 'extend';\r\nimport base64 from './base64';\r\nimport {\r\n    getEvent,\r\n    getEventListenerMethod,\r\n    getBoundingClientRect,\r\n    stringify,\r\n    getDomPath,\r\n} from './utils'\r\nimport { browserInfo } from './browerInfo';\r\n\r\nconst DefaultOptions = {\r\n    useClass: false,\r\n    per: 0.01,\r\n    events: ['click'],\r\n};\r\n\r\nclass Tracker {\r\n    constructor() {\r\n        this._isInstall = false;\r\n        this._options = {};\r\n        this._sendData = {};\r\n        this._id = this.loadId();\r\n        this.onload();\r\n    }\r\n\r\n    config(options = {}) {\r\n        options = extend(true, {}, DefaultOptions, options);\r\n        options.event = DefaultOptions.event;\r\n        this._options = options;\r\n        return this;\r\n    }\r\n\r\n    _captureEvents() {\r\n        const self = this;\r\n        const events = this._options.events;\r\n        const eventMethodObj = getEventListenerMethod();\r\n        for (let i = 0, j = events.length; i < j; i++) {\r\n            let eventName = events[i];\r\n            document.body[eventMethodObj.addMethod](eventMethodObj.prefix + eventName, function (event) {\r\n                const eventFix = getEvent(event);\r\n                if (!eventFix) {\r\n                    return;\r\n                }\r\n                self._handleEvent(eventFix);\r\n            }, false)\r\n        }\r\n    }\r\n\r\n    _handleEvent(event) {\r\n        const per = parseFloat(this._options.per);\r\n        if (!this.hit(per)) {\r\n            return;\r\n        }\r\n        const domPath = getDomPath(event.target, this._options.useClass);\r\n        const rect = getBoundingClientRect(event.target);\r\n        if (rect.width == 0 || rect.height == 0) {\r\n            return;\r\n        }\r\n        let t = document.documentElement || document.body.parentNode;\r\n        const scrollX = (t && typeof t.scrollLeft == 'number' ? t : document.body).scrollLeft;\r\n        const scrollY = (t && typeof t.scrollTop == 'number' ? t : document.body).scrollTop;\r\n        const pageX = event.pageX || event.clientX + scrollX;\r\n        const pageY = event.pageY || event.clientY + scrollY;\r\n        const data = {\r\n            domPath: encodeURIComponent(domPath),\r\n            trackingType: event.type,\r\n            offsetX: ((pageX - rect.left - scrollX) / rect.width).toFixed(6),\r\n            offsetY: ((pageY - rect.top - scrollY) / rect.height).toFixed(6),\r\n        };\r\n        this.send(data);\r\n    }\r\n\r\n    send(data = {}, type = \"p\") {\r\n        let dat = extend(true, {}, data, this._sendData);\r\n        dat = extend(true, {}, dat, { sid: this._id });\r\n        let dat_str = JSON.stringify(dat);\r\n        let dat_encode_str = base64.encode(dat_str);\r\n        // console.log(dat_str);\r\n        // console.log('data', dat);\r\n        const image = new Image(1, 1);\r\n        image.onload = function () {\r\n            image = null;\r\n        };\r\n\r\n        let api = this._options.api;\r\n        if (!api || api == \"undefined\") api = \"\";\r\n\r\n        let data_send = {};\r\n        if (type == \"i\") {\r\n            // 页面初始化\r\n            data_send = { i: dat_encode_str };\r\n        }\r\n        else if(type==\"o\"){\r\n            // 页面关闭\r\n            data_send = { o: dat_encode_str };\r\n        }\r\n        else if(type==\"r\"){\r\n            // 路由切换\r\n            data_send = { r: dat_encode_str };\r\n        }\r\n        else{\r\n            // 页面点击\r\n            data_send = { p: dat_encode_str };\r\n        }\r\n\r\n        image.src = `${api}/?${stringify(data_send)}`;\r\n    }\r\n\r\n    appendData(dat) {\r\n        if (this._sendData)\r\n            this._sendData = dat;\r\n\r\n        return {};\r\n    }\r\n\r\n    hit(per = 0.01) {\r\n        return Math.random() < per;\r\n    }\r\n\r\n    install() {\r\n        if (this._isInstall) {\r\n            return this;\r\n        }\r\n        this._captureEvents();\r\n        this._isInstall = true;\r\n        return this;\r\n    }\r\n\r\n    appendBaseInfo() {\r\n        const url = location.href;\r\n        const path = location.pathname;\r\n        const data = {\r\n            url: url,\r\n            path: path,\r\n            browser: browserInfo(),\r\n        };\r\n        return data;\r\n    }\r\n\r\n    loadId() {\r\n        let k = localStorage.getItem(\"smart-id\");\r\n        if (!k || k == \"undefined\" || k == \"\" || k == null) k = this.saveId();\r\n        return k;\r\n    }\r\n\r\n    saveId() {\r\n        let k = this.genId();\r\n        localStorage.setItem(\"smart-id\", k);\r\n        return k;\r\n    }\r\n\r\n    genId() {\r\n        const c = \"abcdefghijklmn0123456789\";\r\n        let key = \"\";\r\n        for (let i = 0; i < 16; i++) {\r\n            const j = Math.round(Math.random() * c.length);\r\n            key += c.charAt(j);\r\n        }\r\n        return key;\r\n    }\r\n\r\n    onload() {\r\n        window.addEventListener(\"load\", e => {\r\n            this.send(this.appendBaseInfo(),\"i\");\r\n        })\r\n    }\r\n\r\n    unload(){\r\n        window.addEventListener(\"unload\", e => {\r\n            this.send(this.appendBaseInfo(),\"o\");\r\n        })\r\n    }\r\n\r\n}\r\n\r\nexport default Tracker;","import Tracker from './tracker';\r\n\r\nconst tracker = new Tracker();\r\n\r\nexport default tracker;"],"names":["root","freeExports","freeModule","module","exports","freeGlobal","_typeof","global","window","InvalidCharacterError","message","prototype","Error","name","error","TABLE","REGEX_SPACE_CHARACTERS","decode","input","String","replace","length","test","bitCounter","bitStorage","buffer","output","position","indexOf","charAt","fromCharCode","encode","padding","a","b","c","charCodeAt","base64","nodeType","key","hasOwnProperty","this","getEvent","event","target","srcElement","currentTarget","getEventListenerMethod","addMethod","removeMethod","prefix","addEventListener","getBoundingClientRect","element","rect","width","right","left","heigth","bottom","top","extend","stringify","obj","params","push","concat","join","getDomPath","useClass","arguments","undefined","HTMLElement","console","warn","domPath","elem","domDesc","getDomDesc","unshift","querySelector","shift","children","parentNode","i","tagName","id","toLowerCase","className","classes","split","queryString","document","getElementById","getElementsByName","browserInfo","u","navigator","userAgent","self","match","Mobile","hash","engine","browser","os","device","language","g","browserLanguage","arr","toUpperCase","s","value","osVersion","Windows","v","Android","iOS","Mac","version","Chrome","IE","Edge","Firefox","Safari","Opera","Vivaldi","Maxthon","QQBrowser","QQ","Baidu","UC","Explorer","Wechat","Taobao","Alipay","Weibo","Suning","iQiYi","DefaultOptions","per","events","Tracker","_classCallCheck","_isInstall","_options","_sendData","_id","loadId","onload","_createClass","config","options","_captureEvents","eventMethodObj","j","eventName","body","eventFix","_handleEvent","parseFloat","hit","height","t","documentElement","scrollX","scrollLeft","scrollY","scrollTop","pageX","clientX","pageY","clientY","data","encodeURIComponent","trackingType","type","offsetX","toFixed","offsetY","send","dat","sid","dat_str","JSON","dat_encode_str","image","Image","_readOnlyError","api","data_send","o","r","p","src","appendData","Math","random","install","appendBaseInfo","url","location","href","path","pathname","k","localStorage","getItem","saveId","genId","setItem","round","_this","e","unload","_this2","tracker"],"mappings":"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"}