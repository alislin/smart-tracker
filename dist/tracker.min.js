/*!
* smart-tracker v1.0.6
*
* Copyright 2023, aidee
*
*/
var Tracker=function(){"use strict";var c="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function e(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function n(e,n){return e(n={exports:{}},n.exports),n.exports}function u(e){return"function"==typeof Array.isArray?Array.isArray(e):"[object Array]"===g.call(e)}function l(e){if(e&&"[object Object]"===g.call(e)){var n,t=v.call(e,"constructor"),r=e.constructor&&e.constructor.prototype&&v.call(e.constructor.prototype,"isPrototypeOf");if(!e.constructor||t||r){for(n in e);return void 0===n||v.call(e,n)}}}function f(e,n){y&&"__proto__"===n.name?y(e,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):e[n.name]=n.newValue}function s(e,n){if("__proto__"===n){if(!v.call(e,n))return;if(O)return O(e,n).value}return e[n]}function p(){var e,n,t,r,o,i=arguments[0],a=1,d=arguments.length,c=!1;for("boolean"==typeof i&&(c=i,i=arguments[1]||{},a=2),(null==i||"object"!=typeof i&&"function"!=typeof i)&&(i={});a<d;++a)if(null!=(e=arguments[a]))for(n in e)o=s(i,n),i!==(t=s(e,n))&&(c&&t&&(l(t)||(r=u(t)))?(o=r?(r=!1,o&&u(o)?o:[]):o&&l(o)?o:{},f(i,{name:n,newValue:p(c,o,t)})):void 0!==t&&f(i,{name:n,newValue:t}));return i}var r=e(n(function(e){e.exports=function(e){throw new TypeError('"'+e+'" is read-only')},e.exports.__esModule=!0,e.exports.default=e.exports})),t=e(n(function(e){e.exports=function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports})),o=n(function(n){function t(e){return n.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n.exports.__esModule=!0,n.exports.default=n.exports,t(e)}n.exports=t,n.exports.__esModule=!0,n.exports.default=n.exports}),h=e(o),i=n(function(e){var r=o.default;e.exports=function(e,n){if("object"!==r(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return("string"===n?String:Number)(e);if(t=t.call(e,n||"default"),"object"!==r(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")},e.exports.__esModule=!0,e.exports.default=e.exports}),a=(e(i),n(function(e){var n=o.default;e.exports=function(e){return e=i(e,"string"),"symbol"===n(e)?e:String(e)},e.exports.__esModule=!0,e.exports.default=e.exports})),d=(e(a),n(function(e){function r(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,a(r.key),r)}}e.exports=function(e,n,t){return n&&r(e.prototype,n),t&&r(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports})),x=e(d),v=Object.prototype.hasOwnProperty,g=Object.prototype.toString,y=Object.defineProperty,O=Object.getOwnPropertyDescriptor,b=n(function(e,n){var t=c;function u(e){throw new o(e)}var r=n,n=e&&e.exports==r&&e,e="object"==h(c)&&c,o=(e.global!==e&&e.window!==e||(t=e),function(e){this.message=e}),l=(o.prototype=new Error,o.prototype.name="InvalidCharacterError","ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),d=/<%= spaceCharacters %>/g,i={encode:function(e){e=String(e),/[^\0-\xFF]/.test(e)&&u("The string to be encoded contains characters outside of the Latin1 range.");for(var n,t,r,o,i=e.length%3,a="",d=-1,c=e.length-i;++d<c;)n=e.charCodeAt(d)<<16,t=e.charCodeAt(++d)<<8,r=e.charCodeAt(++d),a+=l.charAt((o=n+t+r)>>18&63)+l.charAt(o>>12&63)+l.charAt(o>>6&63)+l.charAt(63&o);return 2==i?(n=e.charCodeAt(d)<<8,t=e.charCodeAt(++d),a+=l.charAt((o=n+t)>>10)+l.charAt(o>>4&63)+l.charAt(o<<2&63)+"="):1==i&&(o=e.charCodeAt(d),a+=l.charAt(o>>2)+l.charAt(o<<4&63)+"=="),a},decode:function(e){for(var n,t,r=(e=String(e).replace(d,"")).length,o=((r=r%4==0?(e=e.replace(/==?$/,"")).length:r)%4!=1&&!/[^+a-zA-Z0-9/]/.test(e)||u("Invalid character: the string to be decoded is not correctly encoded."),0),i="",a=-1;++a<r;)t=l.indexOf(e.charAt(a)),n=o%4?64*n+t:t,o++%4&&(i+=String.fromCharCode(255&n>>(-2*o&6)));return i},version:"<%= version %>"};if(r&&!r.nodeType)if(n)n.exports=i;else for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a]);else t.base64=i});function m(e,n){var t=1<arguments.length&&void 0!==n&&n;if(!(e instanceof HTMLElement))return console.warn("input is not a HTML element!"),"";for(var r=[],o=e;o;){var i=function(e){var n=1<arguments.length&&void 0!==arguments[1]&&arguments[1],t=[];if(!e||!e.tagName)return"";if(e.id)return"#".concat(e.id);t.push(e.tagName.toLowerCase()),n&&(n=e.className)&&"string"==typeof n&&(n=n.split(/\s+/),t.push(".".concat(n.join("."))));e.name&&t.push("[name=".concat(e.name,"]"));return t.join("")}(o,t);if(!i)break;if(r.unshift(i),w(r.join(">"))===e||0<=i.indexOf("body"))break;r.shift();var a=o.parentNode.children;if(1<a.length)for(var d=0;d<a.length;d++)if(a[d]===o){i+=":nth-child(".concat(d+1,")");break}if(r.unshift(i),w(r.join(">"))===e)break;o=o.parentNode}return r.join(">")}function w(e){return document.getElementById(e)||document.getElementsByName(e)[0]||document.querySelector(e)}var $={useClass:!1,per:.01,events:["click"]};return new(function(){function e(){t(this,e),this._isInstall=!1,this._options={},this._sendData={},this._id=this.loadId(),this.onload()}return x(e,[{key:"config",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return(e=p(!0,{},$,e)).event=$.event,this._options=e,this}},{key:"_captureEvents",value:function(){for(var e,n,t,r=this,o=this._options.events,i=(e="addEventListener",n="removeEventListener",t="",window.addEventListener||(e="attachEvent",n="detachEvent",t="on"),{addMethod:e,removeMethod:n,prefix:t}),a=0,d=o.length;a<d;a++){var c=o[a];document.body[i.addMethod](i.prefix+c,function(e){(e=(e=e)||window.event)&&(e.target||(e.target=e.srcElement),e.currentTarget||(e.currentTarget=e.srcElement)),e&&r._handleEvent(e)},!1)}}},{key:"_handleEvent",value:function(e){var n,t,r,o,i,a=parseFloat(this._options.per);this.hit(a)&&(a=m(e.target,this._options.useClass),n=(n=e.target).getBoundingClientRect(),r=n.width||n.right-n.left,t=n.heigth||n.bottom-n.top,0!=(n=p({},n,{width:r,heigth:t})).width)&&0!=n.height&&(t=((r=document.documentElement||document.body.parentNode)&&"number"==typeof r.scrollLeft?r:document.body).scrollLeft,r=(r&&"number"==typeof r.scrollTop?r:document.body).scrollTop,o=e.pageX||e.clientX+t,i=e.pageY||e.clientY+r,a={domPath:encodeURIComponent(a),trackingType:e.type,offsetX:((o-n.left-t)/n.width).toFixed(6),offsetY:((i-n.top-r)/n.height).toFixed(6)},this.send(a))}},{key:"send",value:function(){var e=p(!0,{},0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},this._sendData),e=p(!0,{},e,{sid:this._id}),n=JSON.stringify(e),t=b.encode(n),n=(console.log(n),console.log("data",e),new Image(1,1)),e=(n.onload=function(){r("image")},this._options.api);n.src="".concat(e=e&&"undefined"!=e?e:"","/?").concat(function(e){var n,t=[];for(n in e)t.push("".concat(n,"=").concat(e[n]));return t.join("&")}({p:t}))}},{key:"appendData",value:function(e){return this._sendData&&(this._sendData=e),{}}},{key:"hit",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:.01;return Math.random()<e}},{key:"install",value:function(){return this._isInstall||(this._captureEvents(),this._isInstall=!0),this}},{key:"appendBaseInfo",value:function(){return{url:location.href,path:location.pathname,browser:function(){var e,n=navigator.userAgent,t=(console.log(n),{}),r={Trident:0<n.indexOf("Trident")||0<n.indexOf("NET CLR"),Presto:0<n.indexOf("Presto"),WebKit:0<n.indexOf("AppleWebKit"),Gecko:0<n.indexOf("Gecko/"),Safari:0<n.indexOf("Safari"),Chrome:0<n.indexOf("Chrome")||0<n.indexOf("CriOS"),IE:0<n.indexOf("MSIE")||0<n.indexOf("Trident"),Edge:0<n.indexOf("Edge"),Firefox:0<n.indexOf("Firefox"),Opera:0<n.indexOf("Opera")||0<n.indexOf("OPR"),Vivaldi:0<n.indexOf("Vivaldi"),UC:0<n.indexOf("UC")||0<n.indexOf(" UBrowser"),QQBrowser:0<n.indexOf("QQBrowser"),QQ:0<n.indexOf("QQ/"),Baidu:0<n.indexOf("Baidu")||0<n.indexOf("BIDUBrowser"),Maxthon:0<n.indexOf("Maxthon"),LBBROWSER:0<n.indexOf("LBBROWSER"),"2345Explorer":0<n.indexOf("2345Explorer"),Sogou:0<n.indexOf("MetaSr")||0<n.indexOf("Sogou"),Wechat:0<n.indexOf("MicroMessenger"),Taobao:0<n.indexOf("AliApp(TB"),Alipay:0<n.indexOf("AliApp(AP"),Weibo:0<n.indexOf("Weibo"),Suning:0<n.indexOf("SNEBUY-APP"),iQiYi:0<n.indexOf("IqiyiApp"),Windows:0<n.indexOf("Windows"),Linux:0<n.indexOf("Linux"),Mac:0<n.indexOf("Macintosh"),Android:0<n.indexOf("Android")||0<n.indexOf("Adr"),WP:0<n.indexOf("IEMobile"),BlackBerry:0<n.indexOf("BlackBerry")||0<n.indexOf("RIM")||0<n.indexOf("BB"),MeeGo:0<n.indexOf("MeeGo"),Symbian:0<n.indexOf("Symbian"),iOS:0<n.indexOf("like Mac OS X"),Mobile:0<n.indexOf("Mobi")||0<n.indexOf("iPh")||0<n.indexOf("480"),Tablet:0<n.indexOf("Tablet")||0<n.indexOf("iPad")||0<n.indexOf("Nexus 7")},o=(r.Mobile&&(r.Mobile=!(0<n.indexOf("iPad"))),{engine:["WebKit","Trident","Gecko","Presto"],browser:["Safari","Chrome","IE","Edge","Firefox","Opera","Vivaldi","UC","QQBrowser","QQ","Baidu","Maxthon","Sogou","LBBROWSER","2345Explorer","Wechat","Taobao","Alipay","Weibo","Suning","iQiYi"],os:["Windows","Linux","Mac","Android","iOS","WP","BlackBerry","MeeGo","Symbian"],device:["Mobile","Tablet"]});for(e in t.device="PC",t.language=((d=(navigator.browserLanguage||navigator.language).split("-"))[1]&&(d[1]=d[1].toUpperCase()),d.join("-")),o)for(var i=0;i<o[e].length;i++){var a=o[e][i];r[a]&&(t[e]=a)}var d={Windows:function(){var e=n.replace(/^.*Windows NT ([\d.]+);.*$/,"$1");return{6.4:"10",6.3:"8.1",6.2:"8",6.1:"7","6.0":"Vista",5.2:"XP",5.1:"XP","5.0":"2000"}[e]||e},Android:function(){return n.replace(/^.*Android ([\d.]+);.*$/,"$1")},iOS:function(){return n.replace(/^.*OS ([\d_]+) like.*$/,"$1").replace(/_/g,".")},Mac:function(){return n.replace(/^.*Mac OS X ([\d_]+).*$/,"$1").replace(/_/g,".")}},d=(t.osVersion="",d[t.os]&&(t.osVersion=d[t.os]()),{Chrome:function(){return n.replace(/^.*Chrome\/([\d.]+).*$/,"$1")},IE:function(){var e=n.replace(/^.*MSIE ([\d.]+).*$/,"$1");return(e=e==n?n.replace(/^.*rv:([\d.]+).*$/,"$1"):e)!=n?e:""},Edge:function(){return n.replace(/^.*Edge\/([\d.]+).*$/,"$1")},Firefox:function(){return n.replace(/^.*Firefox\/([\d.]+).*$/,"$1")},Safari:function(){return n.replace(/^.*Version\/([\d.]+).*$/,"$1")},Opera:function(){return n.replace(/^.*Opera\/([\d.]+).*$/,"$1")},Vivaldi:function(){return n.replace(/^.*Vivaldi\/([\d.]+).*$/,"$1")},Maxthon:function(){return n.replace(/^.*Maxthon\/([\d.]+).*$/,"$1")},QQBrowser:function(){return n.replace(/^.*QQBrowser\/([\d.]+).*$/,"$1")},QQ:function(){return n.replace(/^.*QQ\/([\d.]+).*$/,"$1")},Baidu:function(){return n.replace(/^.*BIDUBrowser[\s\/]([\d.]+).*$/,"$1")},UC:function(){return n.replace(/^.*UC?Browser\/([\d.]+).*$/,"$1")},"2345Explorer":function(){return n.replace(/^.*2345Explorer\/([\d.]+).*$/,"$1")},Wechat:function(){return n.replace(/^.*MicroMessenger\/([\d.]+).*$/,"$1")},Taobao:function(){return n.replace(/^.*AliApp\(TB\/([\d.]+).*$/,"$1")},Alipay:function(){return n.replace(/^.*AliApp\(AP\/([\d.]+).*$/,"$1")},Weibo:function(){return n.replace(/^.*weibo__([\d.]+).*$/,"$1")},Suning:function(){return n.replace(/^.*SNEBUY-APP([\d.]+).*$/,"$1")},iQiYi:function(){return n.replace(/^.*IqiyiVersion\/([\d.]+).*$/,"$1")}});return t.version="",d[t.browser]&&(t.version=d[t.browser]()),t}()}}},{key:"loadId",value:function(){var e=localStorage.getItem("smart-id");return e=e&&"undefined"!=e&&""!=e&&null!=e?e:this.saveId()}},{key:"saveId",value:function(){var e=this.genId();return localStorage.setItem("smart-id",e),e}},{key:"genId",value:function(){for(var e="abcdefghijklmn0123456789",n="",t=0;t<16;t++){var r=Math.round(Math.random()*e.length);n+=e.charAt(r)}return n}},{key:"onload",value:function(){var n=this;window.addEventListener("load",function(e){n.send(n.appendBaseInfo())})}}]),e}())}();
//# sourceMappingURL=tracker.min.js.map
